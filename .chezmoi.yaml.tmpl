#chezmoi:template:left-delimiter=#{{

#{{- $personalMachine := false -}}
#{{- if eq (env "PERSONAL_MACHINE" | trim) "" -}}
	#{{- if stdinIsATTY -}}
		#{{- $personalMachine = promptBoolOnce . "is_personal" "Is this a personal machine (y/n)" -}}
	#{{- end -}}
#{{- else -}}
	#{{- $personalMachine = eq (env "PERSONAL_MACHINE" | trim) "true" -}}
#{{- end -}}

#{{- $workEmail := "" -}}
#{{- if not $personalMachine -}}
#{{- $workEmail = promptStringOnce . "email" "Work email address" -}}
#{{- end -}}

git:
  autoCommit: true

edit:
  command: code

data:
  is_mac: #{{ eq .chezmoi.os "darwin" }}
  is_linux: #{{ eq .chezmoi.os "linux" }}
  is_personal: #{{ $personalMachine }}
  work_email: #{{ $workEmail }}
  repoDir: ~/repos

hooks:
  read-source-state:
    pre:
      command: .local/share/chezmoi/.install-password-manager.sh
